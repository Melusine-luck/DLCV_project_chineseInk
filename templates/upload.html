<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>ä¸Šä¼ å›¾ç‰‡ - InkCLIP-GAN</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    
    <style>
        /* === 1. åŸºç¡€æ ·å¼ === */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            padding: 0;
        }

        /* === 2. ä½ åŸæœ¬çš„å¯¼èˆªæ æ ·å¼ (å®Œå…¨ä¿ç•™) === */
        .navbar {
            background-color: #333;
            overflow: hidden;
            margin-bottom: 40px; /* åº•éƒ¨ç•™ç‚¹ç©ºéš™ */
        }
        .navbar ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            text-align: center;
        }
        .navbar li {
            display: inline-block;
        }
        .navbar li a {
            display: block;
            color: white;
            text-align: center;
            padding: 14px 20px;
            text-decoration: none;
        }
        .navbar li a:hover {
            background-color: #575757;
        }

        /* === 3. ä¸»å†…å®¹å®¹å™¨æ ·å¼ === */
        .container {
            width: 90%;
            max-width: 700px;
            margin: 0 auto;
            background-color: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
        }

        h1 { color: #2c3e50; margin-bottom: 30px; }

        /* === 4. æ¨¡å¼é€‰æ‹©å™¨ (æ–°å¢åŠŸèƒ½) === */
        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .mode-selector input[type="radio"] { display: none; } /* éšè—åŸç”Ÿåœ†ç‚¹ */
        
        /* æŒ‰é’®å¤–è§‚ */
        .mode-selector label {
            flex: 1;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            background-color: #fafafa;
            color: #666;
        }
        
        .mode-title { display: block; font-weight: bold; font-size: 1.1em; margin-bottom: 5px; }
        .mode-desc { display: block; font-size: 0.8em; color: #999; }

        /* é€‰ä¸­çŠ¶æ€ A->B (ç…§ç‰‡è½¬æ°´å¢¨) */
        #mode_atob:checked + label {
            border-color: #3498db;
            background-color: #ebf5fb;
            color: #2980b9;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.2);
        }
        
        /* é€‰ä¸­çŠ¶æ€ B->A (æ°´å¢¨è½¬ç…§ç‰‡) */
        #mode_btoa:checked + label {
            border-color: #27ae60;
            background-color: #e9f7ef;
            color: #219150;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.2);
        }

        /* === 5. æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ === */
        .file-upload-wrapper { margin: 30px 0; }
        
        input[type="file"] { display: none; } /* éšè—åŸç”Ÿæ–‡ä»¶æ¡† */
        
        .file-label {
            display: block;
            width: 100%;
            padding: 40px 0;
            border: 2px dashed #bdc3c7;
            border-radius: 10px;
            cursor: pointer;
            color: #7f8c8d;
            transition: all 0.3s;
        }
        .file-label:hover {
            border-color: #3498db;
            color: #3498db;
            background-color: #f8fbff;
        }
        
        /* === 6. æäº¤æŒ‰é’® === */
        .submit-btn {
            padding: 12px 50px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 10px;
        }
        .submit-btn:hover { background-color: #218838; transform: scale(1.05); }

        /* åŠ è½½æç¤º */
        .loading { display: none; margin-top: 20px; color: #007bff; font-weight: bold; }
        #file-text { margin-top: 10px; font-weight: 500; }
    </style>

    <script>
        function showLoading() {
            const fileInput = document.getElementById('image');
            if (!fileInput.value) {
                alert("è¯·å…ˆé€‰æ‹©ä¸€å¼ å›¾ç‰‡ï¼");
                event.preventDefault();
                return false;
            }
            document.getElementById('loading-msg').style.display = 'block';
            document.getElementById('submit-btn').value = "æ­£åœ¨ç”Ÿæˆä¸­...";
            document.getElementById('submit-btn').disabled = true;
        }

        function updateFileName(input) {
            if (input.files && input.files[0]) {
                document.getElementById('file-text').innerText = "âœ… å·²é€‰æ‹©: " + input.files[0].name;
            }
        }
    </script>
</head>

<body>
    <div class="navbar">
        <ul>
            <li><a href="{{ url_for('index') }}">é¦–é¡µ</a></li>
            <li><a href="{{ url_for('upload') }}">ä¸Šä¼ å›¾ç‰‡</a></li>
            <li><a href="{{ url_for('dataset') }}">æ•°æ®é›†ç®¡ç†</a></li>
        </ul>
    </div>

    <div class="container">
        <h1>ä¸Šä¼ å¹¶ç”Ÿæˆå›½é£å›¾ç‰‡</h1>

        <form action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data" onsubmit="showLoading()">
            
            <div class="mode-selector">
                <div style="flex:1">
                    <input type="radio" id="mode_atob" name="mode" value="AtoB" checked>
                    <label for="mode_atob">
                        <span class="mode-title">ğŸï¸ â” ğŸ–Œï¸</span>
                        <span class="mode-title">ç…§ç‰‡è½¬æ°´å¢¨</span>
                        <span class="mode-desc">Photo to Ink</span>
                    </label>
                </div>

                <div style="flex:1">
                    <input type="radio" id="mode_btoa" name="mode" value="BtoA">
                    <label for="mode_btoa">
                        <span class="mode-title">ğŸ–Œï¸ â” ğŸï¸</span>
                        <span class="mode-title">æ°´å¢¨è½¬ç…§ç‰‡</span>
                        <span class="mode-desc">Ink to Photo</span>
                    </label>
                </div>
            </div>

            <div class="file-upload-wrapper">
                <input type="file" id="image" name="image" accept="image/*" required onchange="updateFileName(this)">
                <label for="image" class="file-label">
                    <div style="font-size: 40px; margin-bottom: 10px;">ğŸ“‚</div>
                    <span id="file-text">ç‚¹å‡»è¿™é‡Œé€‰æ‹©å›¾ç‰‡...</span>
                </label>
            </div>

            <input type="submit" id="submit-btn" class="submit-btn" value="å¼€å§‹è½¬æ¢">
        </form>

        <div id="loading-msg" class="loading">
            â³ AI æ­£åœ¨æŒ¥æ¯«æ³¼å¢¨ä¸­ï¼Œè¯·ç¨å€™...
        </div>
    </div>
</body>
</html>